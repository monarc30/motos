# App na RAIZ do site (ex.: comunicado.pradomotos.com): RewriteBase /
# App em SUBPASTA (ex.: site.com/motos): use RewriteBase /motos e APP_BASE_URL=/motos no .env
Options -Indexes +FollowSymLinks
RewriteEngine On
RewriteBase /

# Redirecionar antigos links /motos/public/ para /motos/ (só útil se RewriteBase for /motos)
RewriteRule ^public/(.*)$ $1 [R=301,L]

# Bloquear acesso direto a pastas e arquivos sensíveis
RewriteRule ^app/ - [F,L]
RewriteRule ^config/ - [F,L]
RewriteRule ^database/ - [F,L]
RewriteRule ^vendor/ - [F,L]
RewriteRule ^storage/ - [F,L]
RewriteRule ^\.env - [F,L]
RewriteRule ^\.env_prod - [F,L]
RewriteRule ^\.git - [F,L]

# Arquivos e pastas existentes (assets, etc.) são servidos normalmente
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Encaminhar o resto para index.php
RewriteRule ^(.*)$ index.php [QSA,L]
